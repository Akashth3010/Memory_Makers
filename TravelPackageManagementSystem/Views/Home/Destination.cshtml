@* Change the model to the new Destination table *@
@model IEnumerable<TravelPackageManagementSystem.Repository.Models.Destination>

@{
    ViewBag.Title = "Top Destinations";
}
<style>
    /* Card Container Fixes */
    .destination-grid .card {
        height: 400px;
        border-radius: 20px;
        overflow: hidden; /* Important: keeps the zoomed image inside the card */
        position: relative;
        border: none;
        transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.4s ease; /* Smooth pop-up motion */
    }

        /* 1. The "Pop-Up" Effect: Card lifts up and adds a deep shadow */
        .destination-grid .card:hover {
            transform: translateY(-15px); /* Card lifts up */
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }

        /* Image Initial State */
        .destination-grid .card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            /* We start the image slightly zoomed in (1.2) so it can "zoom out" to 1.0 */
            transform: scale(1.2);
            transition: transform 0.5s ease-in-out;
        }

        /* 2. The "Zoom-Out" Effect: Image scales back to normal on hover */
        .destination-grid .card:hover img {
            transform: scale(1.0); /* Zooms out to reveal more of the image */
        }

    /* Ensure Overlay text remains visible and stable */
    .destination-grid .overlay {
        position: absolute;
        bottom: 0;
        width: 100%;
        padding: 25px;
        background: linear-gradient(transparent, rgba(0, 0, 0, 0.85));
        color: white;
        z-index: 2;
        transition: padding-bottom 0.4s ease;
    }

    .destination-grid .card:hover .overlay {
        padding-bottom: 35px; /* Text lifts slightly with the card */
    }
</style>

<section id="top-destinations" class="destination-section">
    <h2 class="section-title text-center mb-5"><span style="color: #6366f1;">Top</span> Destination</h2>

    <div class="destination-grid">
        @* Loop through the unique Destinations instead of duplicate packages *@
        @foreach (var item in Model)
        {
            @* Use 'StateName' instead of 'Destination' *@
            <div class="card" onclick="location.href='@Url.Action("Destination", "Home", new { state = item.StateName })'" style="cursor:pointer;">
                <img src="@item.ImageUrl" alt="@item.StateName">
                <div class="overlay">
                    <h3>@item.StateName</h3>

                    @* Now using the actual dynamic counts from your new table *@
                    <p>@item.HotelCount Hotels</p>
                    <p>@item.HolidayCount Holidays</p>
                </div>
            </div>
        }
    </div>
</section>