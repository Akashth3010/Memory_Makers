@{
    ViewBag.Title = "Darjeeling Package Details";
    Layout = null;   // remove if you are using _Layout.cshtml
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>

    <link rel="stylesheet" href="@(Url.Content("~/css/Banaras.css"))" />
</head>

<body>

    <section class="hero" style="background-image: url('@Url.Content("~/lib/image/darjiling1.jpg")');">
        <div class="hero-content">
            <h1>Darjeeling Hill Experience</h1>
            <p>4 Days • Tea Gardens • Tiger Hill • Toy Train</p>
        </div>
    </section>

    <div class="container">
        <div class="flex">

            <div class="left-col">

                <div class="package-header">
                    <div class="package-title">
                        <h2 id="packageName" >Darjeeling: Tea, Hills & Toy Train</h2>
                        <div class="rating">★ 4.7 (2,300 reviews)</div>
                    </div>

                    <div style="text-align: right;">
                        <div style="font-size: 14px; color:#666;">Duration</div>
                        <div style="font-weight:700; font-size:16px;">4 Days / 3 Nights</div>
                    </div>
                </div>

                <div class="gallery" aria-label="Image gallery">
                    <div id="mainImage" class="main-image" role="img" aria-label="Main image" style="background-image: url('@Url.Content("~/lib/image/darjiling1.jpg")');"></div>

                    <div class="thumbs" role="list">
                        <button class="thumb active" role="listitem" tabindex="0" type="button" data-src="@Url.Content("~/lib/image/darjeeling2.jpg")" style="background-image: url('@Url.Content("~/lib/image/darjeeling2.jpg")');" aria-label="Tiger Hill"></button>
                        <button class="thumb" role="listitem" tabindex="0" type="button" data-src="@Url.Content("~/lib/image/darjiling3.jpg")" style="background-image: url('@Url.Content("~/lib/image/darjiling3.jpg")');" aria-label="Tea estate"></button>
                        <button class="thumb" role="listitem" tabindex="0" type="button" data-src="@Url.Content("~/lib/image/darjiling4.jpg")" style="background-image: url('@Url.Content("~/lib/image/darjiling4.jpg")');" aria-label="Botanical Garden"></button>
                        <button class="thumb" role="listitem" tabindex="0" type="button" data-src="@Url.Content("~/lib/image/darjeeling5.jpg")" style="background-image: url('@Url.Content("~/lib/image/darjeeling5.jpg")');" aria-label="Toy train"></button>
                    </div>
                </div>

                <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-hidden="true">
                    <img id="lightboxImg" src="" alt="Large view" />
                </div>

                <div class="overview">
                    <h3>Overview</h3>
                    <p>
                        Soak up panoramic Himalayan views, stroll through tea gardens and enjoy the heritage toy train ride.
                        Highlights: Tiger Hill sunrise, Happy Valley tea estate, Padmaja Naidu Himalayan Botanical Garden and local markets.
                        Comfortable hotels, local transfers and guided sightseeing included.
                    </p>
                </div>

                <div class="itinerary" aria-label="Day by day itinerary">
                    <h3>Day-by-Day Itinerary</h3>

                    <div class="day">
                        <div class="day-header" data-day="1">
                            <h4>Day 1 — Arrival & Transfer to Darjeeling</h4>
                            <div class="toggle" aria-hidden="true">+</div>
                        </div>
                        <div class="day-body">
                            <p>Arrival at Bagdogra/NJP and transfer to Darjeeling. Evening at leisure; walk around Mall Road and local markets.</p>
                        </div>
                    </div>

                    <div class="day">
                        <div class="day-header" data-day="2">
                            <h4>Day 2 — Tiger Hill & Batasia Loop</h4>
                            <div class="toggle" aria-hidden="true">+</div>
                        </div>
                        <div class="day-body">
                            <p>Early morning visit to Tiger Hill for sunrise views, then Batasia Loop and Ghoom Monastery. Afternoon visit to the toy train station.</p>
                        </div>
                    </div>

                    <div class="day">
                        <div class="day-header" data-day="3">
                            <h4>Day 3 — Tea Estate & Botanical Garden</h4>
                            <div class="toggle" aria-hidden="true">+</div>
                        </div>
                        <div class="day-body">
                            <p>Tour Happy Valley tea estate with tasting, visit the Padmaja Naidu Himalayan Botanical Garden and HMI (optional).</p>
                        </div>
                    </div>

                    <div class="day">
                        <div class="day-header" data-day="4">
                            <h4>Day 4 — Morning at Leisure & Departure</h4>
                            <div class="toggle" aria-hidden="true">+</div>
                        </div>
                        <div class="day-body">
                            <p>Relaxed morning, checkout and transfer back to Bagdogra/NJP for onward connections.</p>
                        </div>
                    </div>

                </div>

                <div class="price-card" aria-label="Pricing and inclusions">
                    <div class="price-row">
                        <div>Base Price (per person)</div>
                        <div class="price-total" id="pricePerPerson">₹16,500</div>
                    </div>

                    <div class="price-row">
                        <div>Taxes & Fees</div>
                        <div>₹1,485</div>
                    </div>

                    <div class="price-row">
                        <div>Selected Guests</div>
                        <div id="priceSummary">1 person</div>
                    </div>

                    <hr />

                    <div style="font-weight:700; display:flex; justify-content:space-between; align-items:center;">
                        <div>Total Payable</div>
                        <div class="price-total" id="totalPayable">₹17,985</div>
                    </div>

                    <div class="includes">
                        <h4>What's Included</h4>
                        <div class="list-inline">
                            <div class="included">Hotel stays (3 nights)</div>
                            <div class="included">Daily breakfast</div>
                            <div class="included">All transfers & sightseeing</div>
                            <div class="included">Experienced local guide</div>
                        </div>
                    </div>

                    <div class="excludes">
                        <h4>What's Excluded</h4>
                        <div class="list-inline">
                            <div class="excluded">Airfare / Train fare</div>
                            <div class="excluded">Entrance fees where applicable</div>
                            <div class="excluded">Personal expenses</div>
                            <div class="excluded">Meals not specified</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="right-col">
                <aside class="booking-box" aria-labelledby="bookingHeading">
                    <h3 id="bookingHeading">Book This Package</h3>

                    <form id="bookingForm" method="post" action="/Home/PaymentPage">
                        <label for="travelDate">Travel Date</label>
                        <input id="travelDate" name="TravelDate" type="date" required />

                        <label for="guests">Guests</label>
                        <select id="guests" name="Guests" required onchange="updateDarjeelingPrice()">
                            <option value="1" selected>1 person</option>
                            <option value="2">2 persons</option>
                            <option value="3">3 persons</option>
                            <option value="4">4 persons</option>
                        </select>

                        <label for="contactEmail">Contact Email</label>
                        <input id="contactEmail" name="Email" type="email" placeholder="you@example.com" required />

                        <label for="phone">Phone</label>
                        <input id="phone" name="Phone" type="tel" placeholder="+91 98765 43210" />

                        <div class="booking-cta" style="margin-top:8px;">
                            <button type="submit" class="btn btn-primary" id="bookNowBtn" onclick="saveBookingData()">Book Now</button>
                           
                        </div>

                    </form>
                </aside>
            </div>

        </div>
    </div>

    <script src="@(Url.Content("~/js/Darjiling.js"))" defer></script>

    <script>
        function saveBookingData() {
            // 1. Get the Package Name
            // Use querySelector to find the h2 inside package-title if you don't want to change IDs
            const nameElement = document.querySelector('.package-title h2');
            const name = nameElement ? nameElement.innerText : "Unknown Package";

            // 2. Get the Total Price
            const priceElement = document.getElementById('totalPayable');
            const price = priceElement ? priceElement.innerText : "₹0";

            // 3. Save to Local Storage
            localStorage.setItem('selectedPackageName', name);
            localStorage.setItem('selectedPackagePrice', price);

            // Optional: Debugging to see if it works before the page redirects
            console.log("Saving Package:", name);
            console.log("Saving Price:", price);
        }
         // Date Restriction (Grey out past dates)
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('travelDate').setAttribute('min', today);

        // Keep your price calculation logic so the 'totalPayable' updates when guests change
        function calculatePrice() {
            const guests = document.getElementById('guests').value;
            const basePrice = 16500;
            const taxPrice = 1485;
            const total = guests * (basePrice + taxPrice);

            document.getElementById('totalPayable').innerText = "₹" + total.toLocaleString('en-IN');
            document.getElementById('priceSummary').innerText = guests + (guests > 1 ? " persons" : " person");
        }

        // Attach listener to update price automatically
        document.getElementById('guests').addEventListener('change', calculatePrice);
    </script>
</body>
</html>